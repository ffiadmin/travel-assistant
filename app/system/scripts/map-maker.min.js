(function(a){a.fn.FFI_TA_Map_Maker=function(b){a.extend(a.fn.FFI_TA_Map_Maker.defaults,b);var c=new google.maps.InfoWindow;var d=a.fn.FFI_TA_Map_Maker.defaults.zoom;return this.each(function(){var g=[{featureType:"road",stylers:[{color:"#FFFFFF"}]},{featureType:"road.arterial",stylers:[{color:"#F1C40F"}]},{featureType:"road.highway",stylers:[{color:"#F1C40F"}]},{featureType:"landscape",stylers:[{color:"#ECF0F1"}]},{featureType:"water",stylers:[{color:"#73BFC1"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#2ECC71"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"off"}]}];var e=new google.maps.StyledMapType(g,{name:"Splash Map"});var f=new google.maps.LatLngBounds();var i=new google.maps.Map(a(this).get(0),{center:new google.maps.LatLng(a.fn.FFI_TA_Map_Maker.defaults.latitude,a.fn.FFI_TA_Map_Maker.defaults.longitude),mapTypeControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:false,streetViewControl:false,zoom:a.fn.FFI_TA_Map_Maker.defaults.zoom});i.mapTypes.set("map_style",e);i.setMapTypeId("map_style");var h=document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"travel-assistant/";a.ajax({dataType:"json",url:a.fn.FFI_TA_Map_Maker.defaults.processURL,type:"GET",success:function(q){var l=false;for(var o=0;o<q.length;++o){l=false;var n="<b>"+q[o].name+"</b><br>";if(q[o].fromNeeds>0){l=true;n+=q[o].fromNeeds+" "+(q[o].fromNeeds==1?"ride":"rides")+" leaving here needed<br>"}if(q[o].fromShares>0){l=true;n+=q[o].fromShares+" "+(q[o].fromShares==1?"ride":"rides")+" leaving here avaliable<br>"}if(q[o].toNeeds>0){n+=q[o].toNeeds+" "+(q[o].toNeeds==1?"ride":"rides")+" going here needed<br>"}if(q[o].toShares>0){n+=q[o].toShares+" "+(q[o].toShares==1?"ride":"rides")+" going here avaliable<br>"}var p=q[o].state.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();var k=q[o].city.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();if(l){n+="<br><a href='"+h+"browse/"+p+"/"+k+"/'>Browse Trips</a>"}var j=new google.maps.LatLng(parseFloat(q[o].latitude),parseFloat(q[o].longitude));var m;f.extend(j);if(p==a.fn.FFI_TA_Map_Maker.defaults.originState.toLowerCase()&&k==a.fn.FFI_TA_Map_Maker.defaults.originCity.toLowerCase()){m=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,icon:a.fn.FFI_TA_Map_Maker.defaults.originIcon,position:j})}else{m=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,position:j})}a.fn.FFI_TA_Map_Maker.markerClick(i,m,c,n)}if(q.length>0){i.fitBounds(f);i.panToBounds(f)}}})})};a.fn.FFI_TA_Map_Maker.markerClick=function(e,b,d,c){google.maps.event.addListener(b,"click",function(){d.setContent(c);d.open(e,b)})};a.fn.FFI_TA_Map_Maker.defaults={latitude:38.3,longitude:-95.7,originCity:"grove-city",originIcon:"//mt.google.com/vt/icon?name=icons/spotlight/university_search_v_L_8x.png&scale=1.5",originState:"pennsylvania",processURL:document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/system/ajax/map_points.php",zoom:4}})(jQuery);