(function(a){a.fn.FFI_TA_Directions=function(b,c){return this.each(function(){var d=new google.maps.DirectionsRenderer();var g=new google.maps.DirectionsService();var f=[{featureType:"road",stylers:[{color:"#FFFFFF"}]},{featureType:"road.arterial",stylers:[{color:"#F1C40F"}]},{featureType:"road.highway",stylers:[{color:"#F1C40F"}]},{featureType:"landscape",stylers:[{color:"#ECF0F1"}]},{featureType:"water",stylers:[{color:"#73BFC1"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#2ECC71"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"off"}]}];var e=new google.maps.StyledMapType(f,{name:"Splash Map"});var h=new google.maps.Map(a(this).get(0),{center:new google.maps.LatLng(37.09024,-95.712891),mapTypeControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,streetViewControl:false,zoom:4});h.mapTypes.set("map_style",e);h.setMapTypeId("map_style");d.setMap(h);g.route({destination:c,origin:b,travelMode:google.maps.DirectionsTravelMode.DRIVING},function(j,i){if(i==google.maps.DirectionsStatus.OK){d.setDirections(j)}else{alert("An error was encountered while creating a map of the trip route.\n\nIf this is the first time you have seen this error, wait one minute and try reloading this page. If this error continues to occur, contact the site administrator for assistance and include the details listed below.\n\n-----------------------\n\nPage URL:\n"+window.location.href+"\n\nFrom POI:\n"+b+"\nTo POI:\n"+c+"\n\nGoogle API Status:\n"+i)}})})}})(jQuery);(function(a){a.fn.FFI_TA_Steps=function(b,c){return this.each(function(){var d=a(this);a.ajax({data:{from:b,to:c},dataType:"json",type:"GET",url:a.fn.FFI_TA_Steps.defaults.processURL,error:function(e,f){alert("An error was encountered while creating a list of directions for this trip.\n\nIf this is the first time you have seen this error, wait one minute and try reloading this page. If this error continues to occur, contact the site administrator for assistance and include the details listed below.\n\n-----------------------\n\nPage URL:\n"+window.location.href+"\n\nAJAX Status:\n"+f)},success:function(h){var g=h.routes[0].legs[0];var e=g.steps;var j='<ul class="totals">';j+="<li><div><div>"+a.fn.FFI_TA_Steps.boldNumbers(g.distance.text)+"</div></div></li>";j+="<li><div><div>"+a.fn.FFI_TA_Steps.boldNumbers(g.duration.text)+"</div></div></li>";j+='<li class="print" onclick="window.print()"><figure></figure></li>';j+="</ul>";j+='<ol class="steps">';for(var f=0;f<e.length;++f){j+="<li><div>"+e[f].html_instructions+'</div><span class="distance">'+a.fn.FFI_TA_Steps.boldNumbers(e[f].distance.text)+'</span><span class="duration">'+a.fn.FFI_TA_Steps.boldNumbers(e[f].duration.text)+"</span></li>"}j+="</ol>";d.append(j)}})})};a.fn.FFI_TA_Steps.boldNumbers=function(c){var b="";for(var d=0;d<c.length;++d){b+=(!isNaN(c.charAt(d))||c.charAt(d)=="."||c.charAt(d)==",")?("<b>"+c.charAt(d)+"</b>"):c.charAt(d)}return b};a.fn.FFI_TA_Steps.defaults={processURL:document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/system/ajax/directions.php"}})(jQuery);(function(a){a.fn.FFI_TA_Trip=function(b){a.extend(a.fn.FFI_TA_Trip.defaults,b);return this.click(function(){if(!a(this).hasClass("disabled")){a.fn.FFI_TA_Trip.button=a(this);a.fn.FFI_TA_Trip.ID=a.fn.FFI_TA_Trip.button.attr("data-id");a.fn.FFI_TA_Trip.mode=a.fn.FFI_TA_Trip.button.attr("data-mode");a.fn.FFI_TA_Trip.total=parseInt(a.fn.FFI_TA_Trip.button.attr("data-total"));a.fn.FFI_TA_Trip.user=a.fn.FFI_TA_Trip.htmlEntitiesDecode(a.fn.FFI_TA_Trip.button.attr("data-name"));a.fn.FFI_TA_Trip.comments=null;a.fn.FFI_TA_Trip.modal=null;a.fn.FFI_TA_Trip.password=null;a.fn.FFI_TA_Trip.submit=null;a.fn.FFI_TA_Trip.username=null;a.fn.FFI_TA_Trip.validationPrompt=null;a.fn.FFI_TA_Trip.buildDialog();a.fn.FFI_TA_Trip.submitHandler()}})};a.fn.FFI_TA_Trip.buildDialog=function(){var b='<div class="modal hide fade trip-dialog" role="dialog">';b+='<div class="modal-header">';b+='<button type="button" class="close" data-dismiss="modal">×</button>';b+="<h3>"+(a.fn.FFI_TA_Trip.mode=="assist"?"Provide Ride":"Request Ride")+"</h3>";b+="</div>";b+='<div class="modal-body trip-details">';if(a.fn.FFI_TA_Trip.mode=="assist"){b+="<p>You are about to assist "+a.fn.FFI_TA_Trip.user+(a.fn.FFI_TA_Trip.total>1?" and "+(a.fn.FFI_TA_Trip.total-1)+" others on their":" on a")+" trip. Please <strong>carefully examine the information on this page</strong> and make sure you can fulfill all of the trip's requirements before comfirming your decision.</p>"}else{b+="<p>You are about to request 1 seat on a ride provided by "+a.fn.FFI_TA_Trip.user+". Please <strong>carefully examine the information on this page</strong> and make sure this trip fulfills all of your requirements before comfirming your decision.</p>"}b+="</div>";if(a.fn.FFI_TA_Trip.defaults.showComments){b+='<div class="modal-body comments">';b+="<h4>Share comments with "+a.fn.FFI_TA_Trip.user+" (optional):</h4>";b+='<textarea name="content" />';b+="</div>"}if(a.fn.FFI_TA_Trip.defaults.showLogin){if(a.fn.FFI_TA_Trip.placeholderSupported()){b+='<div class="modal-footer login">'}else{b+='<div class="modal-footer login fallback">';b+='<h4 class="placeholder">Username &amp; password:</h4>'}b+='<input class="username" placeholder="Username" type="text">';b+='<input class="password" placeholder="Password" type="password">';b+="</div>"}b+='<div class="modal-footer">';b+='<span class="validate"></span>';b+='<button class="btn btn-warning confirm">'+(a.fn.FFI_TA_Trip.defaults.showLogin?"Login &amp;":"")+" Confirm</button>";b+='<button class="btn close-dialog" data-dismiss="modal">Close</button>';b+="</div>";b+="</div>";a.fn.FFI_TA_Trip.modal=a(b);a.fn.FFI_TA_Trip.modal.on("shown",function(){if(a.fn.FFI_TA_Trip.defaults.showComments){a.fn.FFI_TA_Trip.comments=a.fn.FFI_TA_Trip.modal.find("textarea");if(a.fn.FFI_TA_Trip.comments.parent().is(":visible")){tinymce.init({selector:"textarea",plugins:["autolink contextmenu image link table"],menubar:false,statusbar:false,toolbar:false});tinymce.activeEditor.focus()}}}).modal();if(a.fn.FFI_TA_Trip.defaults.showLogin){a.fn.FFI_TA_Trip.password=a.fn.FFI_TA_Trip.modal.find("input.password");a.fn.FFI_TA_Trip.username=a.fn.FFI_TA_Trip.modal.find("input.username")}a.fn.FFI_TA_Trip.submit=a.fn.FFI_TA_Trip.modal.find("button.confirm");a.fn.FFI_TA_Trip.validationPrompt=a.fn.FFI_TA_Trip.modal.find("span.validate")};a.fn.FFI_TA_Trip.placeholderSupported=function(){var b=document.createElement("input");return("placeholder" in b)};a.fn.FFI_TA_Trip.submitHandler=function(){a.fn.FFI_TA_Trip.submit.click(function(){if(a.fn.FFI_TA_Trip.defaults.showLogin&&!a.fn.FFI_TA_Trip.validate()){a.fn.FFI_TA_Trip.msg("Please enter your login credentials");return}a.fn.FFI_TA_Trip.clearMsg();a.fn.FFI_TA_Trip.submit.attr("disabled","disabled").addClass("disabled").html("Please wait...");tinymce.activeEditor.save();var b={id:a.fn.FFI_TA_Trip.ID,mode:a.fn.FFI_TA_Trip.mode};if(a.fn.FFI_TA_Trip.defaults.showComments){b.comments=a.fn.FFI_TA_Trip.comments.val()}if(a.fn.FFI_TA_Trip.defaults.showLogin){b.username=a.fn.FFI_TA_Trip.username.val();b.password=a.fn.FFI_TA_Trip.password.val()}a.ajax({data:b,type:"POST",url:a.fn.FFI_TA_Trip.defaults.processURL,success:function(d){if(d=="success"){a.fn.FFI_TA_Trip.modal.modal("hide");a.fn.FFI_TA_Trip.button.attr("disabled","disabled").addClass("disabled").html("Request Sent");if(a.fn.FFI_TA_Trip.defaults.showLogin){a.fn.FFI_TA_Trip.defaults.showLogin=false}var c=a('<span class="success"/>');c.appendTo("body").text("Your request is on its way! Keep an eye on your inbox. ;-)");setTimeout(function(){c.fadeOut(500,function(){c.remove()})},5000)}else{a.fn.FFI_TA_Trip.msg(d);a.fn.FFI_TA_Trip.submit.removeAttr("disabled").removeClass("disabled").html((a.fn.FFI_TA_Trip.defaults.showLogin?"Login &amp;":"")+" Confirm")}}})})};a.fn.FFI_TA_Trip.validate=function(){return a.fn.FFI_TA_Trip.username.val()!=""&&a.fn.FFI_TA_Trip.password.val()!=""};a.fn.FFI_TA_Trip.msg=function(b){a.fn.FFI_TA_Trip.validationPrompt.text(b);if(a.fn.FFI_TA_Trip.validationPrompt.is(":hidden")){alert(b)}};a.fn.FFI_TA_Trip.clearMsg=function(){a.fn.FFI_TA_Trip.validationPrompt.text("")};a.fn.FFI_TA_Trip.htmlEntitiesDecode=function(b){return a("<div/>").html(b).text()};a.fn.FFI_TA_Trip.defaults={processURL:document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/system/ajax/trip.php",showComments:true,showLogin:true}})(jQuery);