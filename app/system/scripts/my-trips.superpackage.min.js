(function(a){a.fn.FFI_TA_Visited=function(b){a.extend(a.fn.FFI_TA_Visited.defaults,b);var c=new google.maps.InfoWindow;var d=a.fn.FFI_TA_Visited.defaults.zoom;return this.each(function(){var g=[{featureType:"road",stylers:[{color:"#FFFFFF"}]},{featureType:"road.arterial",stylers:[{color:"#F1C40F"}]},{featureType:"road.highway",stylers:[{color:"#F1C40F"}]},{featureType:"landscape",stylers:[{color:"#ECF0F1"}]},{featureType:"water",stylers:[{color:"#73BFC1"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#2ECC71"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"off"}]}];var e=new google.maps.StyledMapType(g,{name:"Splash Map"});var f=new google.maps.LatLngBounds();var i=new google.maps.Map(a(this).get(0),{center:new google.maps.LatLng(a.fn.FFI_TA_Visited.defaults.latitude,a.fn.FFI_TA_Visited.defaults.longitude),mapTypeControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:false,streetViewControl:false,zoom:a.fn.FFI_TA_Visited.defaults.zoom});i.mapTypes.set("map_style",e);i.setMapTypeId("map_style");var h=document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"travel-assistant/";a.ajax({dataType:"json",url:a.fn.FFI_TA_Visited.defaults.processURL,type:"GET",success:function(p){for(var n=0;n<p.length;++n){var m="<b>"+p[n].name+"</b>";var k=new google.maps.LatLng(parseFloat(p[n].latitude),parseFloat(p[n].longitude));var l;f.extend(k);var o=p[n].state.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();var j=p[n].city.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();if(o==a.fn.FFI_TA_Visited.defaults.originState.toLowerCase()&&j==a.fn.FFI_TA_Visited.defaults.originCity.toLowerCase()){l=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,icon:a.fn.FFI_TA_Visited.defaults.originIcon,position:k})}else{l=new google.maps.Marker({animation:google.maps.Animation.DROP,map:i,position:k})}a.fn.FFI_TA_Visited.markerClick(i,l,c,m)}if(p.length>0){i.fitBounds(f);i.panToBounds(f)}}})})};a.fn.FFI_TA_Visited.markerClick=function(e,b,d,c){google.maps.event.addListener(b,"click",function(){d.setContent(c);d.open(e,b)})};a.fn.FFI_TA_Visited.defaults={latitude:38.3,longitude:-95.7,originCity:"grove-city",originIcon:"//mt.google.com/vt/icon?name=icons/spotlight/university_search_v_L_8x.png&scale=1.5",originState:"pa",processURL:document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/system/ajax/visited.php",zoom:4}})(jQuery);(function(a){a(function(){a("button.delete").click(function(){var c=a(this);var f='<div class="modal hide fade confirm-dialog" role="dialog">';f+='<div class="modal-header">';f+='<button type="button" class="close" data-dismiss="modal">×</button>';f+="<h3>Delete a Trip</h3>";f+="</div>";f+='<div class="modal-body confirm-dialog-details">';f+="<p>This action will delete this trip from the Travel Assistant. Your trip will be permanently deleted and cannot be restored.<br><br>Do you wish to continue?</p>";f+="</div>";f+='<div class="modal-footer">';f+='<span class="validate"></span>';f+='<button class="btn btn-danger confirm">Yes</button>';f+='<button class="btn close-dialog" data-dismiss="modal">No</button>';f+="</div>";f+="</div>";var d=a(f);var e=d.find("button.confirm");var b=d.find("span.validate");d.modal();e.click(function(){e.attr("disabled","disabled").html("Please wait...");b.text("");a.ajax({data:{ID:c.attr("data-id"),type:c.attr("data-type")},type:"POST",url:document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/system/ajax/delete.php",success:function(j){if(j=="success"){d.modal("hide");var h;var i;if(c.parent().parent().hasClass("needed")){h=a("li.needed p span.count");i=parseInt(h.text());h.text(--i);i==1?h.next("span").text("Trip I've Needed"):h.next("span").text("Trips I've Needed")}if(c.parent().parent().hasClass("shared")){h=a("li.shared p span.count");i=parseInt(h.text());h.text(--i);i==1?h.next("span").text("Trip I've Shared"):h.next("span").text("Trips I've Shared")}if(!c.parent().siblings("li").length){!c.parent().parent().siblings("div.none").show()}c.parent().remove();var g=a('<span class="success"/>');g.appendTo("body").text("Your trip has been deleted.");setTimeout(function(){g.fadeOut(500,function(){g.remove()})},5000)}else{b.text(j);if(b.is(":hidden")){alert(j)}e.removeAttr("disabled").html("Yes")}}})})});a("article.map").FFI_TA_Visited()})})(jQuery);