(function(a){a.fn.FFI_TA_Map_Maker=function(b){var e=a.extend(a.fn.FFI_TA_Map_Maker.defaults,b);var c=new google.maps.InfoWindow;var f=document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"wp-content/plugins/travel-assistant/app/includes/ajax/map_points.php";var d=a.fn.FFI_TA_Map_Maker.defaults.zoom;return this.each(function(){var i=[{featureType:"road",stylers:[{color:"#FFFFFF"}]},{featureType:"road.arterial",stylers:[{color:"#F1C40F"}]},{featureType:"road.highway",stylers:[{color:"#F1C40F"}]},{featureType:"landscape",stylers:[{color:"#ECF0F1"}]},{featureType:"water",stylers:[{color:"#73BFC1"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#2ECC71"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{visibility:"off"}]}];var g=new google.maps.StyledMapType(i,{name:"Splash Map"});var h=new google.maps.LatLngBounds();var k=new google.maps.Map(a(this).get(0),{center:new google.maps.LatLng(a.fn.FFI_TA_Map_Maker.defaults.latitude,a.fn.FFI_TA_Map_Maker.defaults.longitude),mapTypeControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,scrollwheel:false,streetViewControl:false,zoom:d});k.mapTypes.set("map_style",g);k.setMapTypeId("map_style");var j=document.location.href.substring(0,document.location.href.indexOf("travel-assistant"))+"travel-assistant/";a.ajax({dataType:"json",url:f,type:"GET",success:function(s){var n=false;for(var q=0;q<s.length;++q){n=false;var p="<b>"+s[q].name+"</b><br>";if(s[q].fromNeeds>0){n=true;p+=s[q].fromNeeds+" "+(s[q].fromNeeds==1?"ride":"rides")+" leaving here needed<br>"}if(s[q].fromShares>0){n=true;p+=s[q].fromShares+" "+(s[q].fromShares==1?"ride":"rides")+" leaving here avaliable<br>"}if(s[q].toNeeds>0){p+=s[q].toNeeds+" "+(s[q].toNeeds==1?"ride":"rides")+" going here needed<br>"}if(s[q].toShares>0){p+=s[q].toShares+" "+(s[q].toShares==1?"ride":"rides")+" going here avaliable<br>"}var r=s[q].state.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();var m=s[q].city.replace(/[^A-Za-z0-9\s]/g,"").replace(/[\s]/g,"-").toLowerCase();if(n){p+="<br><a href='"+j+"browse/"+r+"/"+m+"/'>Browse Trips</a>"}var l=new google.maps.LatLng(parseFloat(s[q].latitude),parseFloat(s[q].longitude));var o;h.extend(l);if(r==a.fn.FFI_TA_Map_Maker.defaults.originState.toLowerCase()&&m==a.fn.FFI_TA_Map_Maker.defaults.originCity.toLowerCase()){o=new google.maps.Marker({animation:google.maps.Animation.DROP,map:k,icon:a.fn.FFI_TA_Map_Maker.defaults.originIcon,position:l})}else{o=new google.maps.Marker({animation:google.maps.Animation.DROP,map:k,position:l})}a.fn.FFI_TA_Map_Maker.markerClick(k,o,c,p)}k.fitBounds(h);k.panToBounds(h)}})})};a.fn.FFI_TA_Map_Maker.markerClick=function(e,b,d,c){google.maps.event.addListener(b,"click",function(){d.setContent(c);d.open(e,b)})};a.fn.FFI_TA_Map_Maker.defaults={latitude:38.3,longitude:-95.7,originCity:"grove-city",originIcon:"//mt.google.com/vt/icon?name=icons/spotlight/university_search_v_L_8x.png&scale=1.5",originState:"pennsylvania",zoom:4}})(jQuery);